doctype html
html
  head
    title Lapchat
    meta(charset='utf-8')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    link(rel='stylesheet', href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css')
    script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js')
    script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js', integrity='sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa', crossorigin='anonymous')
    link(rel='icon', href='https://i.imgur.com/9FttlGB.jpg', type='image/x-icon')
    meta(name='viewport', content='width=device-width, initial-scale=1, maximum-scale=1')
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    link(href='https://fonts.googleapis.com/css?family=Oswald|Open+Sans', rel='stylesheet', type='text/css')
    link(rel='stylesheet', href='/stylesheets/navbar.css')
    style(type='text/css').
      *
      {
      margin:0;
      overflow: hidden;
      }
      img
      {
      }
      #row
      {
      width:100%;
      height:150px;
      bottom:0;
      position: absolute;
      bottom:0;
      display: flex;
      align-items: center;
      justify-content: center;
      }
      .nopadding {
      padding: 0 !important;
      margin: 0 !important;
      }
      #picture
      {
      width:100%;
      }
      video {
      -webkit-transform: scaleX(-1);
      transform: scaleX(-1);
      }
      #recieved-pic
      {
      height:10%;
      width:100%;
      background-color:#72bcd4;
      -webkit-transition: background-color 1s; /* Safari */
      transition: background-color 1s;
      }
      #name
      {
      padding-left:5px;
      display: flex;
      align-items: center;
      width:65%;
      height:100%;
      float:left;
      color:white;
      font-family:Arial;
      font-size:18px;
      }
      #preview-pic
      {
      width:30%;
      height:100%;
      float:left;
      display: flex;
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      }
      #preview-pic img
      {
      border-radius: 50%;
      object-fit: cover;
      width:70px;
      height:70px;
      border: 2px solid white;
      }
      #accept
      {
      display: flex;
      align-items: center;
      justify-content:center;
      width:100%;
      height:100%;
      float:left;
      color:white;
      font-family:Arial;
      font-size:20px;
      background-color:green;
      user-select:none;
      }
      #accept button
      {
      width:100%;
      height:100%;
      outline:none;
      border:none;
      background-color:green;
      }
      #reject button
      {
      width:100%;
      height:100%;
      outline:none;
      border:none;
      background-color:red;
      }
      #reject
      {
      display: flex;
      align-items: center;
      justify-content:center;
      width:100%;
      height:100%;
      float:left;
      color:white;
      font-family:Arial;
      font-size:20px;
      background-color:red;
      user-select:none;
      }
      #title
      {
      width:100%;
      height:10vh;
      font-family: Arial;
      color:white;
      font-size:50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      }
      hr
      {
      margin-bottom:0px;
      padding-bottom:0px;
      }
      #picture
      {
      box-sizing: border-box;
      border: 10px solid #F1671F;
      border-top:0px;
      }
      #dropdown-info
      {
      width:90%;
      height:10px;
      background-color: grey;
      margin-left:5%;
      }
      #render
      {
      z-index: 100;
      width:100%;
      height:100%;
      }
      #render canvas
      {
        z-index:100;
      }
      .name
      {
      color:white;
      font-size:20px;
      font-weight: bold;
      }
      #accept button:hover
      {
        background-color:#006400;
      }
      #reject button:hover
      {
        background-color:#8B0000;
      }
      #chatbox
      {
      width:100%;
      font-size:30px;
      height:10%;
      }
      a:hover
      {
        text-decoration:none;
      }
      #title button
      {
        background-color:#F1671F;
      }
      #user_pic
      {
        height:50px;
      }
      #pic_thing
      {
        text-align:center
      }
  body
    section.navigation
        .nav-container
          .brand
            a(href='/login')
              img(src='https://i.imgur.com/Ypp6w2Q.png' id='boy')
          nav
            .nav-mobile
              a#nav-toggle(href='#!')
                span
            ul.nav-list
              li(style="text-decoration: none;")
                a(href='/dashboard') Home
              li
                a(href='/chat') Chat
              li
                a(href='/profile') Profile
              li
                a(href='/logout') Logout
              if message
                li 
                  a(href='/admin') Admin
    .container-fluid
      .row
        .col-sm-3.nopadding(style='background-color:#72bcd4; height:90vh;')
          #title
            form(method='post', action='/sendthatpic' name="formy" style='width:100%;')
              input(type='text' id="sendpicy" name='pictureidhere' value="meme" style='display:none;')
              button(style="background-color:#F1671F;color:white;text-align:center;width:100%;height:100%;outline:none;border:5px solid white;") SEND
          #render
            canvas#canvas(width='500px', height='434px', style='transform:scaleX(-1);border-bottom:10px solid #F1671F;')
        .col-sm-6.nopadding(style='background-color:#F1671F; height:90vh;')
          #picture
            video#video(width='100%', height='auto', autoplay='')
          #row
            img#snap(src='images/glassicon.png', width='120px', height='120px')
        .col-sm-3.nopadding(style='background-color:purple; height:90vh;overflow:scroll;')
          h3(style="color:white;text-align:center;") Pictures
          hr
          #pic_thing
            each pic, i in picture
              h4(style="color:white;") From: !{pic.user}
              img(src='#{pic.photo}' style="height:150px;transform: scaleX(-1);")
      script(type='text/javascript').
        var video = document.getElementById('video');
        if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true }).then(function(stream) {
        video.srcObject=stream;
        video.play();
        });
        }
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        var video = document.getElementById('video');
        var pngUrl = 0;
        document.getElementById("snap").addEventListener("click", function() {
          context.drawImage(video, 0, 0, 700, 500);
          pngUrl = canvas.toDataURL();
          document.getElementById("sendpicy").value = pngUrl;
          console.log(pngUrl);
        });
      script(src='https://code.jquery.com/jquery-1.10.1.min.js')